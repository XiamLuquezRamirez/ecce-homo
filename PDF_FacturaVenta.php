<?phprequire('fpdf/fpdf.php');include("Conectar.php");$link = conectar();global $cons_constan;$consulta = "SELECT * FROM facturas_venta costan LEFT JOIN clientes cli ON costan.iden=cli.inde_cli where id_fact='" . $_REQUEST["id"] . "'";//echo $consulta;$resultado = mysqli_query($link, $consulta);if (mysqli_num_rows($resultado) > 0) {    while ($fila = mysqli_fetch_array($resultado)) {        $cons_fact = $fila["cons_fact"];        $fec_cre = $fila["fec_cre"];        $ciudad = $fila["ciudad"];        $inde_cli = $fila["inde_cli"];        $nom_cli = $fila["nom_cli"];        $dir_cli = $fila["dir_cli"];        $tel_cli = $fila["tel_cli"];        $fpago = $fila["fpago"];        $total = $fila["total"];        $val_letra = $fila["val_letra"];    }}//   $this->Image('Img/cabecera_pdf.png',10,8,100);class PDF extends FPDF {    //Cabecera de página    function Header() {        $this->Image('Img/cabecera_pdf.png', 10, 8, 100);        $this->SetFont('Arial', 'B', 14);        $this->Cell(100, 25, '', 1, 0, 'C');        $this->Cell(0, 25, utf8_decode(''), 1, 2, 'C');        $this->SetXY(105, 12);        $this->Cell(100, 5, 'FACTURA DE VENTA', 0, 2, 'C');        $this->SetXY(105, 15);        $this->Cell(100, 10, utf8_decode('N°.: ' . $GLOBALS['cons_fact']), 0, 2, 'C');        $this->Line(110, 22.5, 200, 22.5);        $this->SetXY(105, 23);        $this->SetFont('Arial', '', 8);        $this->Cell(100, 4, utf8_decode('FACTURADA POR COMPUTADOR'), 0, 2, 'C');        $this->SetFont('Arial', '', 6);        $this->Cell(100, 4, utf8_decode('RESOLUCIÓN DIAN 13028019618165 FECHA: 2019/10/23'), 0, 2, 'C');        $this->SetFont('Arial', '', 6);        $this->Cell(100, 4, utf8_decode('HABILITA DJSF DESDE No. 659  HASTA 10000'), 0, 2, 'C');    }    function TablaBasica() {        $this->SetFont('Arial', 'B', 10);        $this->SetXY(10, 37);        $this->Cell(100, 11, '', 1, 2, 'C');        $this->SetXY(10, 38);        $this->Cell(100, 4, 'REGIMEN TRIBUTARIO ESPECIAL', 0, 2, 'C');        $this->SetFont('Arial', 'B', 12);        $this->Cell(100, 3, 'SOMOS ENTIDAD SIN ANIMO DE LUCRO', 0, 2, 'C');        $this->SetFont('Arial', '', 8);        $this->Cell(100, 3, utf8_decode('Según ART. IV de la ley 20 de 1974'), 0, 2, 'C');        //*****        $this->SetFont('Arial', 'B', 11);        $this->SetXY(110, 37);        $this->Cell(30, 5, 'FECHA', 1, 2, 'C');        $this->SetFont('Arial', '', 12);        $this->Cell(30, 6, $GLOBALS['fec_cre'], 1, 0, 'C');        $this->SetXY(140, 37);        $this->SetFont('Arial', 'B', 11);        $this->Cell(60, 5, utf8_decode('FORMA DE PAGO'), 1, 2, 'C');        $this->SetFont('Arial', '', 12);        $this->Cell(60, 6, $GLOBALS['fpago'], 1, 0, 'C');//*****        $this->SetFont('Arial', '', 9);        $this->SetXY(10, 49);        $this->Cell(20, 8, 'CLIENTE: ' . utf8_decode($GLOBALS['nom_cli']), 0, 'L');        $this->SetXY(120, 49);        $this->Cell(20, 8, 'NIT/C.C: ' . utf8_decode($GLOBALS['inde_cli']), 0, 'L');        //  $this->Line(10, 55, 200, 55);//*****        $this->SetXY(10, 54.5);        $this->Cell(20, 8, utf8_decode('DIRECCIÓN: ' . $GLOBALS['dir_cli']), 0, 'L');        $this->SetXY(120, 54.5);        $this->Cell(20, 8, utf8_decode('TELÉFONO: ' . $GLOBALS['tel_cli']), 0, 'L');        // $this->Line(10, 68.5, 200, 68.5);        //*****    }    function TablaConceptos() {        $this->SetFont('Arial', 'B', 8);        //*****        $this->SetXY(10, 63);        $this->Cell(15, 8, 'CONCEPTOS: ', 0, 0, 'L');        $this->Line(10, 69.5, 200, 69.5);        $this->Ln(5);        $this->SetFont('Arial', '', 8);        $this->Cell(15, 8, 'Item', 0);        $this->Cell(150, 8, utf8_decode('Descripción'), 0);        $this->Cell(40, 8, 'Valor', 0);        $this->Line(10, 74.5, 200, 74.5);        $consulta = "SELECT * FROM facturasventas_detalles WHERE id_facturas='" . $_REQUEST["id"] . "'";        //echo $consulta;        $item = 0;        $resultado = mysqli_query($GLOBALS['link'], $consulta);        $Y = 75;        if (mysqli_num_rows($resultado) > 0) {            while ($fila = mysqli_fetch_array($resultado)) {                $this->SetXY(10, $Y);                $item = $item + 1;                $this->Cell(15, 3, $item, 0);                $this->MultiCell(160, 3, utf8_decode($fila['concepto']), 0);                $H = $this->GetY();                $height = $H - $Y;                $this->SetXY(175, $Y);                $this->Cell(40, $height, '$ ' . number_format($fila["valor"], 2, ",", "."), 0, 0, 'R');                $this->Ln(8);                //dashed_line(10, y1, 200, y2, dash_length=1, space_length=1);                $Y = $H;            }        }        $y = $this->GetY();        $this->SetFont('Arial', 'B', 9);        $this->SetXY(10, $y + 1);         $this->MultiCell(145, 4, utf8_decode(acentos('VALOR EN LETRA ' . $GLOBALS['val_letra'])), 0);        $this->SetXY(155, $y + 1);        $this->Cell(15, 6, 'TOTAL: ', 1, 0, 'L');        $this->SetXY(170, $y + 1);        $this->Cell(0, 6, '$ ' . number_format($GLOBALS['total'], 2, ",", "."), 1, 0, 'R');        // $this->Line(170, $y+1, 200, $y+1);        $y = $this->GetY();        $this->SetFont('Arial', '', 7);        $this->SetXY(10, $y + 8);        $this->SetFont('Arial', 'B', 8);        $this->Cell(0, 6, utf8_decode('CONSIGNACIÓN: 087300318-13 CUENTA CORRIENTE BANCOLOMBIA'), 1, 2, 'l');        $this->SetFont('Arial', '', 8);        $this->Cell(0, 6, utf8_decode('ESTA FACTURA SE ASIMILA EN TODOS SUS EFECTOS A LA LETRA DE CAMBIO ARTICULO 774 DEL CÓDIGO DE COMERCIO. '), 1, 2, 'C');        $this->SetFont('Arial', 'B', 8);        $this->MultiCell(0, 4, utf8_decode('SOMOS PRESTADORES DE SERVICIOS EXCLUIDOS, ARTICULO 476 DEL ESTATUTO TRIBUTARIO. NO SOMOS AUTORRETENEDORES NI GRANDES CONTRIBUYENTES. '), 1);        $this->Cell(0, 25, '', 1, 0, 'C');        $this->SetXY(15, $y + 30);        $this->Cell(15, 8, 'AUTORIZADO POR:', 0, 0, 'L');        $this->SetXY(15, $y + 40);        $this->Cell(15, 8, 'JARDINES DEL ECCE HOMO', 0, 0, 'L');        // $this->Line(15, $y + 37, 70, $y + 37);        $this->SetXY(140, $y + 30);        $this->Cell(15, 8, 'FIRMA Y SELLO QUIEN RECIBE', 0, 0, 'L');        $this->SetXY(143, $y + 43);        $this->Cell(140, 8, 'C.C. No.', 0, 0, 'L');        $this->Line(140, $y + 44, 190, $y + 44);    }    //Pie de página    function Footer() {        $this->Ln(9.5);        $this->SetFont('Arial', 'B', 8);        $this->Cell(0, 10, utf8_decode('-- Software para la Administración de Procesos de la Funeraria la Esperanza --'), 0, 0, 'C');        $this->Ln(4);        $this->SetFont('Arial', 'I', 8);        $this->Cell(0, 10, utf8_decode('Página Web: www.funerarialaesperanza.org - E-mail: servicios@funerarialaesperanza.org'), 0, 0, 'C');    }}//Creación del objeto de la clase heredada$pdf = new PDF();$pdf->AddPage();$pdf->SetY(40);$pdf->TablaBasica();$pdf->TablaConceptos();$pdf->SetFont('Times', '', 12);//Aquí escribimos lo que deseamos mostrar...$pdf->Output('I', 'Factura_' . $cons_constan . '.pdf');?>